(function(){"use strict";var e={866:function(e,t,i){var a=i(751),o=i(317),n=i(723);(0,n.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var l=i(220),r=i(641);const s={class:"container-main"};function d(e,t,i,a,o,n){const l=(0,r.g2)("system-selection"),d=(0,r.g2)("selection-by-conditions"),c=(0,r.g2)("MapImg"),u=(0,r.g2)("OrbitInformation");return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.bF)(l,{"onUpdate:selectedSystem":n.updateSelectedSystemId},null,8,["onUpdate:selectedSystem"]),(0,r.bF)(d,{"selected-system-id":o.selectedSystemId,onFilterApplied:n.updateMapData},null,8,["selected-system-id","onFilterApplied"]),1==e.selectedOrbit?((0,r.uX)(),(0,r.Wv)(c,{key:0,ref:"MapImg",onOrbitApplied:n.updateOrbitInfo},null,8,["onOrbitApplied"])):(0,r.Q3)("",!0),e.informationOrbit?((0,r.uX)(),(0,r.Wv)(u,{key:1,ref:"OrbitInformation"},null,512)):(0,r.Q3)("",!0)])}var c=i(550),u=i(343),p=i(33);const b={class:"container"},m=["onClick","innerHTML"];function f(e,t,i,a,o,n){return(0,r.uX)(),(0,r.CE)("div",b,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.systems,(e=>((0,r.uX)(),(0,r.CE)("p",{key:e.id,onClick:t=>n.selectSystem(e),class:(0,p.C4)({selected:o.selectedSystem&&o.selectedSystem.id===e.id}),innerHTML:`${e.name}<br>${e.detail}`},null,10,m)))),128))])}var h={data(){return{selectedSystem:null,systems:[{id:1,name:"Земля-Луна",detail:"точка L1"},{id:2,name:"Земля-Луна",detail:"точка L2"}]}},methods:{selectSystem(e){this.selectedSystem=e,this.$emit("update:selected-system",e.id)}}},L=i(262);const v=(0,L.A)(h,[["render",f],["__scopeId","data-v-31db4e68"]]);var y=v,O=i(739);const P={class:"container"},C={key:0,class:"tooltip"},g={class:"params"};function F(e,t,i,a,o,n){const l=(0,r.g2)("custom-select"),s=(0,r.g2)("from-to");return(0,r.uX)(),(0,r.CE)("div",P,[(0,r.Lk)("h2",null,[t[5]||(t[5]=(0,r.eW)(" Отбор по условиям ")),(0,r.Lk)("div",{class:"info-icon-wrapper",onMouseover:t[0]||(t[0]=(...e)=>n.showTooltip&&n.showTooltip(...e)),onMouseleave:t[1]||(t[1]=(...e)=>n.hideTooltip&&n.hideTooltip(...e))},[t[4]||(t[4]=(0,r.Lk)("img",{src:O,alt:"Информация",class:"info-icon",style:{width:"15px",height:"15px"}},null,-1)),o.tooltipVisible?((0,r.uX)(),(0,r.CE)("div",C,t[3]||(t[3]=[(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,"Параметры системы:")],-1),(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,"μ = 0,01215"),(0,r.Lk)("li",null,"Расстояние между Землей и Луной: 384400 км")],-1)]))):(0,r.Q3)("",!0)],32)]),(0,r.Lk)("div",g,[(0,r.Lk)("div",null,[t[6]||(t[6]=(0,r.Lk)("p",null,"Семейство",-1)),(0,r.bF)(l,{options:n.filteredFamilyLabels,modelValue:n.selectedFamilyLabel,"onUpdate:modelValue":n.onUpdateFamilyLabel},null,8,["options","modelValue","onUpdate:modelValue"])]),(0,r.Lk)("div",null,[t[7]||(t[7]=(0,r.Lk)("p",null,"Амплитуда по x (км)",-1)),(0,r.bF)(s,{filterName:"amplitudeX",onUpdate:n.onUpdateFilter},null,8,["onUpdate"])]),(0,r.Lk)("div",null,[t[8]||(t[8]=(0,r.Lk)("p",null,"Период (дни)",-1)),(0,r.bF)(s,{filterName:"period",onUpdate:n.onUpdateFilter},null,8,["onUpdate"])]),(0,r.Lk)("div",null,[t[9]||(t[9]=(0,r.Lk)("p",null,"Амплитуда по y (км)",-1)),(0,r.bF)(s,{filterName:"amplitudeY",onUpdate:n.onUpdateFilter},null,8,["onUpdate"])]),(0,r.Lk)("div",null,[t[10]||(t[10]=(0,r.Lk)("p",null,"Константа Якоби",-1)),(0,r.bF)(s,{filterName:"jacobiConstant",onUpdate:n.onUpdateFilter},null,8,["onUpdate"])]),(0,r.Lk)("div",null,[t[11]||(t[11]=(0,r.Lk)("p",null,"Амплитуда по z (км)",-1)),(0,r.bF)(s,{filterName:"amplitudeZ",onUpdate:n.onUpdateFilter},null,8,["onUpdate"])])]),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.applyFilters&&n.applyFilters(...e))},"Отобрать")])}var I=i(736),k=i(161),j=i(834),U={components:{fromTo:k.A,CustomSelect:I.A},props:{selectedSystemId:{type:Number,default:null}},data(){return{familyOptions:[{label:"Горизонтальные орбиты Ляпунова, L1",value:"L1.L"},{label:"Горизонтальные орбиты Ляпунова, L2",value:"L2.L"},{label:"Вертикальные орбиты Ляпунова, L1",value:"L1.V"},{label:"Вертикальные орбиты Ляпунова, L2",value:"L2.V"},{label:"Аксиальные орбиты, L1",value:"L1.A"},{label:"Аксиальные орбиты, L2",value:"L2.A"},{label:"Гало орбиты, L1",value:"L1.H"},{label:"Гало орбиты, L2",value:"L2.H"},{label:"Двухпериодические квазигоризонтальные орбиты, L1",value:"L1.L.2P1"},{label:"Двухпериодические квазигоризонтальные орбиты, L2",value:"L2.L.2P1"},{label:"Трехпериодические квазигоризонтальные орбиты, L1",value:"L1.L.3P1"},{label:"Трехпериодические квазигоризонтальные орбиты, L2",value:"L2.L.3P1"},{label:"Четырехпериодические квазигоризонтальные орбиты, L1",value:"L1.L.4P1"},{label:"Четырехпериодические квазигоризонтальные орбиты, L2",value:"L2.L.4P1"},{label:"Четырехпериодические квазигоризонтальные орбиты, L1 (2P1.2P1)",value:"L1.L.2P1.2P1"},{label:"Четырехпериодические квазигоризонтальные орбиты, L2 (2P1.2P1)",value:"L2.L.2P1.2P1"},{label:"Шестипериодические квазигоризонтальные орбиты, L1 (2P1.3P1)",value:"L1.L.2P1.3P1"},{label:"Шестипериодические квазигоризонтальные орбиты, L1 (2P1.3P2)",value:"L1.L.2P1.3P2"},{label:"Шестипериодические квазигоризонтальные орбиты, L2 (2P1.3P1)",value:"L2.L.2P1.3P1"},{label:"Шестипериодические квазигоризонтальные орбиты, L2 (2P1.3P2)",value:"L2.L.2P1.3P2"},{label:"Двухпериодические квазигоризонтальные орбиты, L1 (2P1.Tan)",value:"L1.L.2P1.Tan"},{label:"Двухпериодические квазигоризонтальные орбиты, L2 (2P1.Tan)",value:"L2.L.2P1.Tan"},{label:"Двухпериодические квазигало орбиты, L1 (2P1)",value:"L1.H.2P1"},{label:"Двухпериодические квазигало орбиты, L1 (2P2)",value:"L1.H.2P2"},{label:"Двухпериодические квазигало орбиты, L1 (2P3)",value:"L1.H.2P3"},{label:"Двухпериодические квазигало орбиты, L2 (2P1)",value:"L2.H.2P1"},{label:"Двухпериодические квазигало орбиты, L2 (2P2)",value:"L2.H.2P2"},{label:"Трехпериодические квазигало орбиты, L1 (3P1)",value:"L1.H.3P1"},{label:"Трехпериодические квазигало орбиты, L1 (3P2)",value:"L1.H.3P2"},{label:"Трехпериодические квазигало орбиты, L1 (3P3)",value:"L1.H.3P3"},{label:"Трехпериодические квазигало орбиты, L2 (3P1)",value:"L2.H.3P1"},{label:"Квазипериодические орбиты, L1",value:"L1.Q"}],tooltipVisible:!1}},computed:{...(0,j.aH)(["filters"]),filteredFamilyOptions(){return 1===this.selectedSystemId?this.familyOptions.filter((e=>e.value.includes("L1"))):2===this.selectedSystemId?this.familyOptions.filter((e=>e.value.includes("L2"))):this.familyOptions},filteredFamilyLabels(){return this.filteredFamilyOptions.map((e=>e.label))},selectedFamilyLabel:{get(){const e=this.filteredFamilyOptions.find((e=>e.value===this.filters.family));return e?e.label:""},set(e){const t=this.filteredFamilyOptions.find((t=>t.label===e));t?this.updateFamily(t.value):this.updateFamily("")}}},watch:{selectedSystemId(e,t){e!==t&&this.updateFamily("")}},methods:{...(0,j.PY)(["selectOrbit"]),...(0,j.i0)(["updateFilter","updateFamily"]),onUpdateFilter({filterName:e,value:t}){this.updateFilter({filterName:e,value:t})},onUpdateFamilyLabel(e){const t=this.filteredFamilyOptions.find((t=>t.label===e));t?this.updateFamily(t.value):this.updateFamily("")},applyFilters(){this.selectOrbit(),this.$emit("filter-applied")},showTooltip(){this.tooltipVisible=!0},hideTooltip(){this.tooltipVisible=!1}}};const S=(0,L.A)(U,[["render",F],["__scopeId","data-v-4a0b6d30"]]);var w=S,T={components:{MapImg:c.A,OrbitInformation:u.A,systemSelection:y,SelectionByConditions:w},data(){return{selectedSystemId:null}},methods:{updateSelectedSystemId(e){this.selectedSystemId=e,this.updateMapData()},updateMapData(){this.$refs.MapImg&&this.$refs.MapImg.fetchOrbits()},updateOrbitInfo(){this.$refs.OrbitInformation&&this.$refs.OrbitInformation.submit()}},computed:{...(0,j.aH)(["selectedOrbit","informationOrbit"])},watch:{selectedOrbit(e){1===e&&this.$nextTick((()=>{this.updateMapData()}))}}};const A=(0,L.A)(T,[["render",d],["__scopeId","data-v-15bc528e"]]);var N=A;const X={class:"container-main"};function E(e,t,i,a,o,n){const l=(0,r.g2)("displayTypeBlock"),s=(0,r.g2)("OrbitInformationBuild"),d=(0,r.g2)("OrbitProjections"),c=(0,r.g2)("NearestOrbitPoincare"),u=(0,r.g2)("PoincareSectionWithCj"),p=(0,r.g2)("ParameterChangeGraph");return(0,r.uX)(),(0,r.CE)("div",X,[(0,r.bF)(l,{orbitCoordinates:o.orbitCoordinates,selectedOption:o.selectedOption,"onUpdate:selectedOption":t[0]||(t[0]=e=>o.selectedOption=e),jacobiConstant:o.jacobiConstant,onUpdateOrbitCoordinates:n.updateOrbitCoordinates,onFindNearestOrbit:n.findNearestOrbit,onUpdatePoincarePlane:n.updatePoincarePlane,onBuildPoincareSectionWithCj:n.buildPoincareSectionWithCj,onBuildParameterChangeGraph:n.buildParameterChangeGraph},null,8,["orbitCoordinates","selectedOption","jacobiConstant","onUpdateOrbitCoordinates","onFindNearestOrbit","onUpdatePoincarePlane","onBuildPoincareSectionWithCj","onBuildParameterChangeGraph"]),"Орбита в 3D"===o.selectedOption?((0,r.uX)(),(0,r.Wv)(s,{key:0,parentLoading:o.isLoading,onUpdateOrbitCoordinates:n.updateOrbitCoordinates,onUpdateFamily:n.updateFamily,onUpdateJacobiConstant:n.updateJacobiConstant},null,8,["parentLoading","onUpdateOrbitCoordinates","onUpdateFamily","onUpdateJacobiConstant"])):"Проекции орбиты"===o.selectedOption?((0,r.uX)(),(0,r.Wv)(d,{key:1,orbitId:e.orbitId,onUpdateOrbitCoordinates:n.updateOrbitCoordinates},null,8,["orbitId","onUpdateOrbitCoordinates"])):"Сечение Пуанкаре одной орбиты"===o.selectedOption?((0,r.uX)(),(0,r.Wv)(c,{parentLoading:o.isLoading,poincarePlane:o.poincarePlane,onUpdateOrbitCoordinates:n.updateOrbitCoordinates,onUpdateFamily:n.updateFamily,onUpdateJacobiConstant:n.updateJacobiConstant,key:e.orbitId},null,8,["parentLoading","poincarePlane","onUpdateOrbitCoordinates","onUpdateFamily","onUpdateJacobiConstant"])):"Сечение Пуанкаре с константой Якоби"===o.selectedOption?((0,r.uX)(),(0,r.Wv)(u,{key:3,librationPoint:o.librationPoint,cj:o.jacobiConstant,d:o.jacobiError,plane:o.poincarePlane},null,8,["librationPoint","cj","d","plane"])):(0,r.Q3)("",!0),"График изменения параметра в семействе"===o.selectedOption&&o.family&&o.paramX&&o.paramY?((0,r.uX)(),(0,r.Wv)(p,{key:4,family:o.family,paramX:o.paramX,paramY:o.paramY},null,8,["family","paramX","paramY"])):(0,r.Q3)("",!0)])}var D=i(357),$=i(610),H=i(539),x=i(481),_=i(930),M=i(278),W={components:{OrbitInformationBuild:D.A,OrbitProjections:$.A,displayTypeBlock:H.A,NearestOrbitPoincare:x.A,PoincareSectionWithCj:_.A,ParameterChangeGraph:M.A},data(){return{orbitCoordinates:{x:0,y:0,z:0,vx:0,vy:0,vz:0},selectedOption:"Орбита в 3D",family:null,paramX:null,paramY:null,jacobiConstant:null,librationPoint:"L1",jacobiError:.01,orbitNotFound:!1,isLoading:!1,nearestOrbit:null,poincareSections:[],poincarePlane:null}},computed:{...(0,j.aH)(["orbitId"]),orbitData(){return this.$store.getters.getOrbitData(this.orbitId)}},methods:{...(0,j.i0)(["updateOrbitId","cacheOrbitData"]),updateOrbitCoordinates(e){this.orbitCoordinates={...e}},updateFamily(e){this.family=e},updateJacobiConstant(e){this.jacobiConstant=e},async findNearestOrbit(){this.isLoading=!0;try{const{x:e,y:t,z:i,vx:a,vy:o,vz:n}=this.orbitCoordinates,l=await fetch(`https://orbital-catalog.auditory.ru/api/v1/trajectories/nearest?x=${e||0}&y=${t||0}&z=${i||0}&vx=${a||0}&vy=${o||0}&vz=${n||0}`),r=await l.json();if(l.ok){if(void 0===r.orbit_id)throw new Error("Invalid response format from server");this.updateOrbitId(r.orbit_id),this.orbitNotFound=!1,this.cacheOrbitData({id:r.orbit_id,orbitInfo:null,trajectory:r.v})}else{if(404!==l.status||"not found"!==r.detail)throw new Error("Error finding nearest orbit");this.updateOrbitId(null),this.orbitNotFound=!0}}catch(e){console.error("Error finding nearest orbit:",e),this.updateOrbitId(null),this.orbitNotFound=!0}finally{this.isLoading=!1}},updateNearestOrbit(e){this.nearestOrbit=e},updatePoincareSections(e){this.poincareSections=e},updatePoincarePlane(e){this.poincarePlane=e},buildPoincareSectionWithCj(e){this.librationPoint=e.librationPoint,this.jacobiConstant=e.cj,this.jacobiError=e.d,this.poincarePlane=e.plane,this.selectedOption="Сечение Пуанкаре с константой Якоби"},buildParameterChangeGraph(e){this.family=e.family,this.paramX=e.paramX,this.paramY=e.paramY,this.selectedOption="График изменения параметра в семействе"}},watch:{orbitId(e){e&&this.selectedOption,e&&this.selectedOption}},mounted(){this.orbitId&&this.selectedOption,this.orbitId&&this.selectedOption}};const B=(0,L.A)(W,[["render",E],["__scopeId","data-v-64cd45fc"]]);var V=B;const Y=[{path:"/",name:"mainPage",component:N},{path:"/build",name:"buildPage",component:V}],z=(0,l.aE)({history:(0,l.LA)("/"),routes:Y});var J=z,G=(0,j.y$)({state:{selectedOrbit:0,informationOrbit:0,orbitId:null,filters:{amplitudeX:{from:null,to:null},period:{from:null,to:null},amplitudeY:{from:null,to:null},jacobiConstant:{from:null,to:null},amplitudeZ:{from:null,to:null},family:null},orbitCache:{},poincarePlane:"x = 0"},mutations:{selectOrbit(e){e.selectedOrbit=1},infoOrbit(e){e.informationOrbit=1},resetInformationOrbit(e){e.informationOrbit=0},setOrbitId(e,t){e.orbitId=t},setPoincarePlane(e,t){e.poincarePlane=t},addOrbitToCache(e,{id:t,orbitInfo:i,trajectory:a}){e.orbitCache[t]={orbitInfo:i,trajectory:a}},addTrajectoryToCache(e,{id:t,trajectory:i}){e.orbitCache[t]||(e.orbitCache[t]={}),e.orbitCache[t].trajectory=i},addOrbitInfoToCache(e,{id:t,orbitInfo:i}){e.orbitCache[t]||(e.orbitCache[t]={}),e.orbitCache[t].orbitInfo=i},setFilter(e,{filterName:t,value:i}){e.filters[t]=i},setFamily(e,t){e.filters.family=t},setAllOrbitsData(e,t){e.allOrbitsData=t},setSelectedOrbitsData(e,t){e.selectedOrbitsData=t},setSelectedOrbitId(e,t){e.selectedOrbitId=t}},actions:{updateOrbitId({commit:e},t){e("setOrbitId",t)},updateFilter({commit:e},{filterName:t,value:i}){e("setFilter",{filterName:t,value:i})},updateFamily({commit:e},t){e("setFamily",t)},cacheOrbitData({commit:e},t){e("addOrbitToCache",t)},cacheTrajectoryData({commit:e},t){e("addTrajectoryToCache",t)},cacheOrbitInfo({commit:e},t){e("addOrbitInfoToCache",t)}},getters:{orbitId:e=>e.orbitId,filters:e=>e.filters,getOrbitData:e=>t=>e.orbitCache?e.orbitCache[t]:void 0,getOrbitInfo:e=>t=>e.orbitCache[t]?.orbitInfo||null,getTrajectory:e=>t=>e.orbitCache[t]?.trajectory||null}});(0,a.Ef)(o.A).use(G).use(J).mount("#app")}},t={};function i(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,i),n.exports}i.m=e,function(){var e=[];i.O=function(t,a,o,n){if(!a){var l=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],n=e[c][2];for(var r=!0,s=0;s<a.length;s++)(!1&n||l>=n)&&Object.keys(i.O).every((function(e){return i.O[e](a[s])}))?a.splice(s--,1):(r=!1,n<l&&(l=n));if(r){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,o,n]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/"}(),function(){var e={655:0,282:0};i.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,n,l=a[0],r=a[1],s=a[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(o in r)i.o(r,o)&&(i.m[o]=r[o]);if(s)var c=s(i)}for(t&&t(a);d<l.length;d++)n=l[d],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(c)},a=self["webpackChunkmiem_project"]=self["webpackChunkmiem_project"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[556,937,914,706,335,395,825,282,562,13,156],(function(){return i(866)}));a=i.O(a)})();
//# sourceMappingURL=app-d87c119a.e45f0061.js.map