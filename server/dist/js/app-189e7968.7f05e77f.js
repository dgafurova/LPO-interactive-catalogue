"use strict";(self["webpackChunkmiem_project"]=self["webpackChunkmiem_project"]||[]).push([[562],{317:function(t,a,e){e.d(a,{A:function(){return d}});var i=e(641);function o(t,a,e,o,r,n){const s=(0,i.g2)("headerOfPage"),l=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(s),(0,i.bF)(l)],64)}var r=e(827),n={components:{headerOfPage:r.A},data(){return{}}},s=e(262);const l=(0,s.A)(n,[["render",o]]);var d=l},980:function(t,a,e){e.d(a,{A:function(){return u}});var i=e(641);const o={ref:"plot",class:"plotly-graph"};function r(t,a,e,r,n,s){return(0,i.uX)(),(0,i.CE)("div",o,null,512)}var n=e(708),s=e.n(n),l={props:{dataPoints:{type:Array,required:!0,default:()=>[]},plane:{type:String,required:!0,default:"x = 0"}},watch:{dataPoints:{handler(t){this.$nextTick((()=>{t.length>0?this.renderPlot():this.clearPlot()}))},deep:!0,immediate:!0},plane(){this.$nextTick((()=>{this.dataPoints.length>0&&this.renderPlot()}))}},mounted(){this.$nextTick((()=>{this.dataPoints.length>0&&this.renderPlot()}))},methods:{formatNumber(t){return 0===t?"0":t.toLocaleString(void 0,{minimumFractionDigits:12,maximumFractionDigits:12}).replace(/\.?0+$/,"")},renderPlot(){if(!this.$refs.plot)return void console.error("Ref 'plot' is not available.");const t={"x = 0":{x:"y",y:"z",titleX:"Y (10³ km)",titleY:"Z (10³ km)"},"y = 0":{x:"x",y:"z",titleX:"X (10³ km)",titleY:"Z (10³ km)"},"z = 0":{x:"x",y:"y",titleX:"X (10³ km)",titleY:"Y (10³ km)"},"vx = 0":{x:"vy",y:"vz",titleX:"Vy (10³ km/s)",titleY:"Vz (10³ km/s)"},"vy = 0":{x:"vx",y:"vz",titleX:"Vx (10³ km/s)",titleY:"Vz (10³ km/s)"},"vz = 0":{x:"vx",y:"vy",titleX:"Vx (10³ km/s)",titleY:"Vy (10³ km/s)"}},a=this.plane||"x = 0",e=t[a];if(!e)return void console.error(`Unknown plane: ${a}`);const i=this.dataPoints.map(((t,a)=>{const i=t.v.map((t=>({x:t[e.x]/1e3,y:t[e.y]/1e3,actualX:t.x,actualY:t.y,actualZ:t.z,vx:t.vx,vy:t.vy,vz:t.vz}))),o=i.map((t=>t.x)),r=i.map((t=>t.y)),n=i.map((t=>`X: ${this.formatNumber(t.actualX)} km<br>Y: ${this.formatNumber(t.actualY)} km<br>Z: ${this.formatNumber(t.actualZ)} km<br>Vx: ${this.formatNumber(t.vx)} km/s<br>Vy: ${this.formatNumber(t.vy)} km/s<br>Vz: ${this.formatNumber(t.vz)} km/s`)),s=`hsl(${360*a/this.dataPoints.length}, 100%, 50%)`;return{x:o,y:r,mode:"markers",type:"scatter",name:`Орбита ${t.orbit_id}`,marker:{size:6,color:s},text:n,hoverinfo:"text"}})),o={title:`Пуанкаре секции (${a})`,xaxis:{title:e.titleX,tickformat:",.0f",exponentformat:"none",zeroline:!1,showgrid:!0},yaxis:{title:e.titleY,tickformat:",.0f",exponentformat:"none",zeroline:!1,showgrid:!0},showlegend:!1,width:700,height:500,hovermode:"closest"},r={displayModeBar:!1,responsive:!0};s().react(this.$refs.plot,i,o,r)},clearPlot(){this.$refs.plot?s().purge(this.$refs.plot):console.warn("Plot reference is not available for clearing.")}}},d=e(262);const c=(0,d.A)(l,[["render",r],["__scopeId","data-v-bbd8ab0a"]]);var u=c},481:function(t,a,e){e.d(a,{A:function(){return I}});var i=e(641);const o={class:"container"},r={key:0,class:"loading-message"},n={key:1,class:"content"},s={class:"info-2"},l={key:0,class:"no-orbits-message"},d={key:1,class:"loading-message"},c={key:2},u={key:3,class:"no-orbits-message"};function h(t,a,e,h,m,p){const b=(0,i.g2)("PlotlyGraph");return(0,i.uX)(),(0,i.CE)("div",o,[p.combinedIsLoading?((0,i.uX)(),(0,i.CE)("div",r,a[0]||(a[0]=[(0,i.Lk)("div",{class:"spinner"},null,-1),(0,i.Lk)("p",null,"Загрузка данных графика...",-1)]))):((0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("div",s,[a[4]||(a[4]=(0,i.Lk)("h3",null,"Визуализация орбиты",-1)),(0,i.Lk)("div",null,[m.noOrbitInfoFound?((0,i.uX)(),(0,i.CE)("div",l,a[1]||(a[1]=[(0,i.Lk)("p",null,"К сожалению, данные графика орбиты не найдены.",-1)]))):m.trajectoryLoading?((0,i.uX)(),(0,i.CE)("div",d,a[2]||(a[2]=[(0,i.Lk)("div",{class:"spinner"},null,-1),(0,i.Lk)("p",null,"Загрузка данных траектории...",-1)]))):m.orb4.length>0?((0,i.uX)(),(0,i.CE)("div",c,[(0,i.bF)(b,{dataPoints:m.orb4,plane:m.plane},null,8,["dataPoints","plane"])])):((0,i.uX)(),(0,i.CE)("div",u,a[3]||(a[3]=[(0,i.Lk)("p",null,"Данные траектории отсутствуют.",-1)])))])])]))])}var m=e(834);const p={ref:"plot",class:"plotly-graph"};function b(t,a,e,o,r,n){return(0,i.uX)(),(0,i.CE)("div",p,null,512)}var v=e(708),f=e.n(v),y={props:{dataPoints:{type:Array,required:!0,default:()=>[]},plane:{type:String,required:!0,default:"x = 0"}},watch:{dataPoints:{handler(t){this.$nextTick((()=>{t.length>0?this.renderPlot():this.clearPlot()}))},deep:!0,immediate:!0},plane(){this.$nextTick((()=>{this.dataPoints.length>0&&this.renderPlot()}))}},mounted(){this.$nextTick((()=>{this.dataPoints.length>0&&this.renderPlot()}))},methods:{formatNumber(t,a=4){return 0===t?"0":t.toLocaleString(void 0,{minimumFractionDigits:a,maximumFractionDigits:a}).replace(/\.?0+$/,"")},renderPlot(){if(!this.$refs.plot)return void console.error("Ref 'plot' is not available.");const t={"x = 0":{x:"y",y:"z",titleX:"Y",titleY:"Z",unitX:"km",unitY:"km",scale:!0},"y = 0":{x:"x",y:"z",titleX:"X",titleY:"Z",unitX:"km",unitY:"km",scale:!0},"z = 0":{x:"x",y:"y",titleX:"X",titleY:"Y",unitX:"km",unitY:"km",scale:!0},"vx = 0":{x:"vy",y:"vz",titleX:"Vy",titleY:"Vz",unitX:"km/s",unitY:"km/s",scale:!1},"vy = 0":{x:"vx",y:"vz",titleX:"Vx",titleY:"Vz",unitX:"km/s",unitY:"km/s",scale:!1},"vz = 0":{x:"vx",y:"vy",titleX:"Vx",titleY:"Vy",unitX:"km/s",unitY:"km/s",scale:!1}},a=this.plane,e=t[a];if(!e)return void console.error(`Unknown plane: ${a}`);const i="vx = 0"===a||"vy = 0"===a||"vz = 0"===a,o=e.scale&&!i,r=i?",.3f":",.0f",n=this.dataPoints.map((t=>({x:o?t[e.x]/1e3:t[e.x],y:o?t[e.y]/1e3:t[e.y],actualX:t.x,actualY:t.y,actualZ:t.z,vx:t.vx,vy:t.vy,vz:t.vz,id:t.id}))),s=n.map((t=>t.x)),l=n.map((t=>t.y)),d=n.map((t=>t.id)),c=n.map((t=>`ID: ${t.id}<br>X: ${this.formatNumber(t.actualX)} км<br>Y: ${this.formatNumber(t.actualY)} км<br>Z: ${this.formatNumber(t.actualZ)} км<br>Vx: ${this.formatNumber(t.vx)} km/s<br>Vy: ${this.formatNumber(t.vy)} km/s<br>Vz: ${this.formatNumber(t.vz)} km/s`)),u=[{x:s,y:l,mode:"markers",type:"scatter",marker:{size:6,color:"blue"},text:c,hoverinfo:"text",customdata:d}],h={title:`Пуанкаре секции (${a})`,xaxis:{title:`${e.titleX} (${o?"10³ ":""}${e.unitX})`,tickformat:r,exponentformat:"none",zeroline:!1,showgrid:!0},yaxis:{title:`${e.titleY} (${o?"10³ ":""}${e.unitY})`,tickformat:r,exponentformat:"none",zeroline:!1,showgrid:!0},showlegend:!1,width:700,height:500,hovermode:"closest"},m={displayModeBar:!1,responsive:!0};f().react(this.$refs.plot,u,h,m)},clearPlot(){this.$refs.plot?f().purge(this.$refs.plot):console.warn("Plot reference is not available for clearing.")}}},g=e(262);const L=(0,g.A)(y,[["render",b],["__scopeId","data-v-15b235f3"]]);var x=L,P={components:{PlotlyGraph:x},props:{parentLoading:{type:Boolean,default:!1},poincarePlane:{type:String,default:"x = 0"}},data(){return{orb4:[],noOrbitInfoFound:!1,localLoading:!1,plane:this.poincarePlane||"x = 0",trajectoryLoading:!1}},computed:{...(0,m.L8)(["orbitId"]),combinedIsLoading(){return this.parentLoading||this.localLoading||this.trajectoryLoading}},watch:{orbitId(t){t?this.loadOrbitData(t):(this.noOrbitInfoFound=!0,this.resetData())},poincarePlane(t){this.plane=t||"x = 0",this.orbitId&&this.loadOrbitData(this.orbitId)}},mounted(){this.orbitId?this.loadOrbitData(this.orbitId):this.noOrbitInfoFound=!0},methods:{resetData(){this.orb4=[]},async loadOrbitData(t){console.log(`Загрузка данных орбиты с ID: ${t}`),this.localLoading=!0;try{console.log(`Запрос данных орбиты с ID: ${t}`);let a=await fetch(`https://orbital-catalog.auditory.ru/api/v1/orbits/${t}`,{method:"GET"});if(console.log(`Ответ на запрос орбиты: ${a.status}`),!a.ok)throw this.noOrbitInfoFound=!0,new Error("Failed to fetch orbit data");let e=await a.json();if(console.log("Полученные данные орбиты:",e),!e||!e.id)throw this.noOrbitInfoFound=!0,new Error("Invalid orbit data");this.noOrbitInfoFound=!1,console.log(`Запрос траектории для орбиты ID: ${e.id}`),this.trajectoryLoading=!0;let i=await fetch(`https://orbital-catalog.auditory.ru/api/v1/poincare_sections/${e.id}/${this.plane}`,{method:"GET"});console.log(`Ответ на запрос Poincaré секций: ${i.status}`);let o=[];if(i.ok){let t=await i.json();console.log("Полученные данные Poincaré секций:",t),o=t||[]}else console.error("Failed to fetch Poincaré sections data");let r=await fetch(`https://orbital-catalog.auditory.ru/api/v1/trajectories/${e.id}`,{method:"GET"});if(console.log(`Ответ на запрос траектории: ${r.status}`),r.ok){let t=await r.json();console.log("Полученные данные траектории:",t);let a=t||[];if(a.length>0){const t=a[0];this.$emit("update-orbit-coordinates",{x:t.x,y:t.y,z:t.z,vx:t.vx,vy:t.vy,vz:t.vz})}else console.error("Trajectory data is empty.")}else console.error("Failed to fetch trajectory data");this.orb4=o}catch(a){console.error("NearestOrbitPoincare.vue: Ошибка при получении данных орбиты:",a),this.noOrbitInfoFound=!0,this.resetData()}finally{this.localLoading=!1,this.trajectoryLoading=!1}}}};const k=(0,g.A)(P,[["render",h],["__scopeId","data-v-3ec28858"]]);var I=k},357:function(t,a,e){e.d(a,{A:function(){return L}});var i=e(641),o=e(33);const r={class:"container"},n={key:0,class:"loading-message"},s={key:1,class:"content"},l={class:"info"},d={key:0,class:"min-container"},c={key:1,class:"no-orbits-message"},u={class:"info-2"},h={key:0,class:"csv"},m={key:1,class:"no-orbits-message"};function p(t,a,e,p,b,v){const f=(0,i.g2)("PlotlyCsv3d");return(0,i.uX)(),(0,i.CE)("div",r,[v.combinedIsLoading?((0,i.uX)(),(0,i.CE)("div",n,a[0]||(a[0]=[(0,i.Lk)("div",{class:"spinner"},null,-1),(0,i.Lk)("p",null,"Загрузка данных орбиты...",-1)]))):((0,i.uX)(),(0,i.CE)("div",s,[(0,i.Lk)("div",l,[a[2]||(a[2]=(0,i.Lk)("h3",null,"Информация об орбите",-1)),b.noOrbitInfoFound?((0,i.uX)(),(0,i.CE)("div",c,a[1]||(a[1]=[(0,i.Lk)("p",null,"К сожалению, информация об орбите не найдена.",-1)]))):((0,i.uX)(),(0,i.CE)("div",d,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(b.orbitInfo,((t,a)=>((0,i.uX)(),(0,i.CE)("div",{class:"point",key:a},[(0,i.Lk)("p",null,(0,o.v_)(b.labels[a]),1),(0,i.Lk)("p",null,(0,o.v_)(t),1)])))),128))]))]),(0,i.Lk)("div",u,[a[4]||(a[4]=(0,i.Lk)("h3",null,"Визуализация орбиты",-1)),(0,i.Lk)("div",null,[b.noOrbitInfoFound?((0,i.uX)(),(0,i.CE)("div",m,a[3]||(a[3]=[(0,i.Lk)("p",null,"К сожалению, данные графика орбиты не найдены.",-1)]))):((0,i.uX)(),(0,i.CE)("div",h,[(0,i.bF)(f,{csvData:b.orb4,class:"csv-orb"},null,8,["csvData"])]))])])]))])}var b=e(431),v=e(834),f={components:{PlotlyCsv3d:b.A},props:{selectedOption:String,parentLoading:{type:Boolean,default:!1}},emits:["update-orbit-coordinates","update-family","update-jacobi-constant"],data(){return{orbitInfo:{period:null,amplitudeX:null,amplitudeY:null,amplitudeZ:null,jacobiConstant:null,stability:null,family:null},orb4:[],noOrbitInfoFound:!1,localLoading:!1,labels:{period:"Период (дни)",amplitudeX:"Амплитуда по x (км)",amplitudeY:"Амплитуда по y (км)",amplitudeZ:"Амплитуда по z (км)",jacobiConstant:"Значение константы Якоби",stability:"Устойчивость",family:"Семейство"},familyOptions:[{label:"Горизонтальные орбиты Ляпунова, L1",value:"L1.L"},{label:"Горизонтальные орбиты Ляпунова, L2",value:"L2.L"},{label:"Вертикальные орбиты Ляпунова, L1",value:"L1.V"},{label:"Вертикальные орбиты Ляпунова, L2",value:"L2.V"},{label:"Аксиальные орбиты, L1",value:"L1.A"},{label:"Аксиальные орбиты, L2",value:"L2.A"},{label:"Гало орбиты, L1",value:"L1.H"},{label:"Гало орбиты, L2",value:"L2.H"},{label:"Двухпериодические квазигоризонтальные орбиты, L1",value:"L1.L.2P1"},{label:"Двухпериодические квазигоризонтальные орбиты, L2",value:"L2.L.2P1"},{label:"Трехпериодические квазигоризонтальные орбиты, L1",value:"L1.L.3P1"},{label:"Трехпериодические квазигоризонтальные орбиты, L2",value:"L2.L.3P1"},{label:"Четырехпериодические квазигоризонтальные орбиты, L1",value:"L1.L.4P1"},{label:"Четырехпериодические квазигоризонтальные орбиты, L2",value:"L2.L.4P1"},{label:"Четырехпериодические квазигоризонтальные орбиты, L1 (2P1.2P1)",value:"L1.L.2P1.2P1"},{label:"Четырехпериодические квазигоризонтальные орбиты, L2 (2P1.2P1)",value:"L2.L.2P1.2P1"},{label:"Шестипериодические квазигоризонтальные орбиты, L1 (2P1.3P1)",value:"L1.L.2P1.3P1"},{label:"Шестипериодические квазигоризонтальные орбиты, L1 (2P1.3P2)",value:"L1.L.2P1.3P2"},{label:"Шестипериодические квазигоризонтальные орбиты, L2 (2P1.3P1)",value:"L2.L.2P1.3P1"},{label:"Шестипериодические квазигоризонтальные орбиты, L2 (2P1.3P2)",value:"L2.L.2P1.3P2"},{label:"Двухпериодические квазигоризонтальные орбиты, L1 (2P1.Tan)",value:"L1.L.2P1.Tan"},{label:"Двухпериодические квазигоризонтальные орбиты, L2 (2P1.Tan)",value:"L2.L.2P1.Tan"},{label:"Двухпериодические квазигало орбиты, L1 (2P1)",value:"L1.H.2P1"},{label:"Двухпериодические квазигало орбиты, L1 (2P2)",value:"L1.H.2P2"},{label:"Двухпериодические квазигало орбиты, L1 (2P3)",value:"L1.H.2P3"},{label:"Двухпериодические квазигало орбиты, L2 (2P1)",value:"L2.H.2P1"},{label:"Двухпериодические квазигало орбиты, L2 (2P2)",value:"L2.H.2P2"},{label:"Трехпериодические квазигало орбиты, L1 (3P1)",value:"L1.H.3P1"},{label:"Трехпериодические квазигало орбиты, L1 (3P2)",value:"L1.H.3P2"},{label:"Трехпериодические квазигало орбиты, L1 (3P3)",value:"L1.H.3P3"},{label:"Трехпериодические квазигало орбиты, L2 (3P1)",value:"L2.H.3P1"},{label:"Квазипериодические орбиты, L1",value:"L1.Q"}]}},computed:{...(0,v.L8)(["orbitId","getOrbitData"]),combinedIsLoading(){return this.parentLoading||this.localLoading}},watch:{orbitId(t){t?this.loadOrbitData(t):(this.noOrbitInfoFound=!0,this.resetData())}},mounted(){this.orbitId?this.loadOrbitData(this.orbitId):this.noOrbitInfoFound=!0},methods:{...(0,v.i0)(["cacheOrbitData"]),resetData(){this.orbitInfo={period:null,amplitudeX:null,amplitudeY:null,amplitudeZ:null,jacobiConstant:null,stability:null,family:null},this.orb4=[]},mapFamilyTags(t){if(!t)return"N/A";const a=Array.isArray(t)?t:[t],e={};this.familyOptions.forEach((t=>{e[t.value]=t.label}));const i=a.map((t=>e[t]||t));return i.join(", ")},async submit(){this.isLoading=!0;try{let t=await fetch(`https://orbital-catalog.auditory.ru/api/v1/orbits/${this.orbitId}`,{method:"GET"});if(!t.ok)throw this.noOrbitInfoFound=!0,new Error("Failed to fetch orbit data");let a=await t.json();if(!a||!a.t)return void(this.noOrbitInfoFound=!0);console.log(a.az),this.noOrbitInfoFound=!1,this.orbitInfo.period=null!=a.t?a.t.toFixed(2):"N/A",this.orbitInfo.amplitudeX=null!=a.ax?a.ax.toFixed(2):"N/A",this.orbitInfo.amplitudeY=null!=a.ay?a.ay.toFixed(2):"N/A",this.orbitInfo.amplitudeZ=void 0!==a.az?a.az.toFixed(2):"N/A",this.orbitInfo.jacobiConstant=null!=a.cj?a.cj.toFixed(5):"N/A",this.orbitInfo.stability=a.stable?"Устойчива":"Не устойчива",this.orbitInfo.family=this.mapFamilyTags(a.tags);let e=this.getOrbitData(this.orbitId)?.trajectory||[];if(0===e.length){let t=await fetch(`https://orbital-catalog.auditory.ru/api/v1/trajectories/${a.id}`,{method:"GET"});if(t.ok){let a=await t.json();if(e=a||[],e.length>0){const t=e[0];this.$emit("update-orbit-coordinates",{x:t.x,y:t.y,z:t.z,vx:t.vx,vy:t.vy,vz:t.vz})}else console.error("Trajectory data is empty.")}else console.error("Failed to fetch trajectory data")}else if(e.length>0){const t=e[0];this.$emit("update-orbit-coordinates",{x:t.x,y:t.y,z:t.z,vx:t.vx,vy:t.vy,vz:t.vz})}this.orb4=e,this.$emit("update-family",this.orbitInfo.family),this.$emit("update-jacobi-constant",a.cj||null),this.cacheOrbitData({id:this.orbitId,orbitInfo:this.orbitInfo,trajectory:this.orb4})}catch(t){console.error("Error fetching orbit data:",t),this.noOrbitInfoFound=!0,this.resetData()}finally{this.isLoading=!1}},async loadOrbitData(t){const a=this.getOrbitData(t);if(a&&a.orbitInfo&&a.trajectory)return console.log(`OrbitInformationBuild.vue: Используем кешированные данные для orbitId: ${t}`),void this.setOrbitData(a);this.localLoading=!0;try{let e=await fetch(`https://orbital-catalog.auditory.ru/api/v1/orbits/${t}`,{method:"GET"});if(!e.ok)throw this.noOrbitInfoFound=!0,new Error("Failed to fetch orbit data");let i=await e.json();if(!i||!i.t)return void(this.noOrbitInfoFound=!0);this.noOrbitInfoFound=!1,this.orbitInfo.period=null!=i.t?i.t.toFixed(2):"N/A",this.orbitInfo.amplitudeX=null!=i.ax?i.ax.toFixed(2):"N/A",this.orbitInfo.amplitudeY=null!=i.ay?i.ay.toFixed(2):"N/A",this.orbitInfo.amplitudeZ=null!==i.az?i.az.toFixed(2):"N/A",this.orbitInfo.jacobiConstant=null!=i.cj?i.cj.toFixed(5):"N/A",this.orbitInfo.stability=i.stable?"Устойчива":"Не устойчива",this.orbitInfo.family=this.mapFamilyTags(i.tags);let o=a?a.trajectory:[];if(0===o.length){let t=await fetch(`https://orbital-catalog.auditory.ru/api/v1/trajectories/${i.id}`,{method:"GET"});if(t.ok){let a=await t.json();if(o=a||[],o.length>0){const t=o[0];this.$emit("update-orbit-coordinates",{x:t.x,y:t.y,z:t.z,vx:t.vx,vy:t.vy,vz:t.vz})}else console.error("Trajectory data is empty.")}else console.error("Failed to fetch trajectory data")}else if(o.length>0){const t=o[0];this.$emit("update-orbit-coordinates",{x:t.x,y:t.y,z:t.z,vx:t.vx,vy:t.vy,vz:t.vz})}this.orb4=o,this.$emit("update-family",this.orbitInfo.family),this.$emit("update-jacobi-constant",i.cj||null),this.cacheOrbitData({id:t,orbitInfo:this.orbitInfo,trajectory:this.orb4})}catch(e){console.error("OrbitInformationBuild.vue: Ошибка при получении данных орбиты:",e),this.noOrbitInfoFound=!0,this.resetData()}finally{this.localLoading=!1}},setOrbitData(t){if(t.orbitInfo&&t.trajectory){if(this.orbitInfo={...t.orbitInfo},this.orb4=[...t.trajectory],this.noOrbitInfoFound=!1,this.orb4.length>0){const t=this.orb4[0];this.$emit("update-orbit-coordinates",{x:t.x,y:t.y,z:t.z,vx:t.vx,vy:t.vy,vz:t.vz})}this.cacheOrbitData({id:this.orbitId,orbitInfo:this.orbitInfo,trajectory:this.orb4})}else this.noOrbitInfoFound=!0,this.resetData()},goToBuildPage(){this.orbitId?this.$router.push("/build"):console.error("OrbitInformationBuild.vue: Orbit ID is not available.")}}},y=e(262);const g=(0,y.A)(f,[["render",p],["__scopeId","data-v-424c7c5b"]]);var L=g},610:function(t,a,e){e.d(a,{A:function(){return L}});var i=e(641);const o={class:"container"},r={key:0,class:"loading-message"},n={key:1,class:"projections"},s={key:2,class:"no-data-message"};function l(t,a,e,l,d,c){const u=(0,i.g2)("Plotly2DProjection");return(0,i.uX)(),(0,i.CE)("div",o,[a[2]||(a[2]=(0,i.Lk)("h3",null,"Проекции орбиты",-1)),c.combinedIsLoading?((0,i.uX)(),(0,i.CE)("div",r,a[0]||(a[0]=[(0,i.Lk)("div",{class:"spinner"},null,-1),(0,i.Lk)("p",null,"Загрузка данных траектории...",-1)]))):d.data&&d.data.length?((0,i.uX)(),(0,i.CE)("div",n,[(0,i.bF)(u,{data:d.data,projection:"xy"},null,8,["data"]),(0,i.bF)(u,{data:d.data,projection:"xz"},null,8,["data"]),(0,i.bF)(u,{data:d.data,projection:"yz"},null,8,["data"])])):((0,i.uX)(),(0,i.CE)("div",s,a[1]||(a[1]=[(0,i.Lk)("p",null,"К сожалению, данные траектории не найдены.",-1)])))])}const d=["id"];function c(t,a,e,o,r,n){return(0,i.uX)(),(0,i.CE)("div",{id:r.chartId,class:"plotly-chart"},null,8,d)}var u=e(708),h=e.n(u),m={props:{data:{type:Array,required:!0},projection:{type:String,required:!0,validator:t=>["xy","xz","yz"].includes(t)}},data(){return{chartId:`plotly-chart-${Math.random().toString(36).substr(2,9)}`}},mounted(){this.plotData()},watch:{data(){this.plotData()},projection(){this.plotData()}},methods:{plotData(){if(!this.data||0===this.data.length)return void console.error("No data provided for 2D projection.");let t,a,e,i;"xy"===this.projection?(t=this.data.map((t=>t.x/1e3)),a=this.data.map((t=>t.y/1e3)),e="X, 10³ км",i="Y, 10³ км"):"xz"===this.projection?(t=this.data.map((t=>t.x/1e3)),a=this.data.map((t=>t.z/1e3)),e="X, 10³ км",i="Z, 10³ км"):"yz"===this.projection&&(t=this.data.map((t=>t.y/1e3)),a=this.data.map((t=>t.z/1e3)),e="Y, 10³ км",i="Z, 10³ км");const o={x:t,y:a,mode:"lines",line:{color:"blue",width:2},hoverinfo:"none"},r={xaxis:{title:{text:e,standoff:10},zeroline:!1,tickformat:",.0f"},yaxis:{title:{text:i,standoff:10},zeroline:!1,tickformat:",.0f"},margin:{l:40,r:10,b:30,t:10}};h().newPlot(this.chartId,[o],r,{responsive:!0})}}},p=e(262);const b=(0,p.A)(m,[["render",c],["__scopeId","data-v-705698a3"]]);var v=b,f=e(834),y={components:{Plotly2DProjection:v},props:{orbitId:{type:[String,Number],required:!0}},emits:["update-orbit-coordinates"],data(){return{data:[],isLoading:!1}},computed:{...(0,f.L8)(["getTrajectory"]),combinedIsLoading(){return this.isLoading}},watch:{orbitId(t){console.log(`OrbitProjections.vue: orbitId изменился на ${t}`),t?this.fetchTrajectoryData(t):this.data=[]}},created(){this.orbitId?(console.log(`OrbitProjections.vue: Создаёмся с orbitId: ${this.orbitId}`),this.fetchTrajectoryData(this.orbitId)):console.error("OrbitProjections.vue: orbitId не найден в URL.")},methods:{...(0,f.i0)(["cacheTrajectoryData"]),async fetchTrajectoryData(t){console.log(`OrbitProjections.vue: Начинаем загрузку траектории для orbitId: ${t}`),this.isLoading=!0;try{const a=this.getTrajectory(t);if(a&&a.length>0)return console.log(`OrbitProjections.vue: Используем кешированные данные траектории для orbitId: ${t}`),this.data=a,void this.emitFirstPoint(a);const e=await fetch(`https://orbital-catalog.auditory.ru/api/v1/trajectories/${t}`,{method:"GET"});if(!e.ok)throw new Error("Не удалось получить данные траектории.");const i=await e.json();console.log("OrbitProjections.vue: Полученные данные траектории:",i),this.data=i||[],this.data.length>0?(this.emitFirstPoint(this.data),this.cacheTrajectoryData({id:t,trajectory:this.data}),console.log(`OrbitProjections.vue: Кешируем траекторию для orbitId: ${t}`)):console.warn("OrbitProjections.vue: Данные траектории пусты.")}catch(a){console.error("OrbitProjections.vue: Ошибка при получении данных траектории:",a),this.data=[]}finally{this.isLoading=!1,console.log(`OrbitProjections.vue: Завершили загрузку траектории для orbitId: ${t}`)}},emitFirstPoint(t){const a=t[0];a&&void 0!==a.x?(console.log("OrbitProjections.vue: Эмитируем координаты первой точки траектории:",a),this.$emit("update-orbit-coordinates",{x:a.x,y:a.y,z:a.z,vx:a.vx,vy:a.vy,vz:a.vz})):console.warn("OrbitProjections.vue: Первый пункт траектории не содержит необходимых данных.")}}};const g=(0,p.A)(y,[["render",l],["__scopeId","data-v-3abc8f50"]]);var L=g},278:function(t,a,e){e.d(a,{A:function(){return L}});var i=e(641),o=e(33);const r={class:"container"},n={key:0,class:"loading-message"},s={key:1,class:"error-message"},l={key:2,class:"content"};function d(t,a,e,d,c,u){const h=(0,i.g2)("GraphForParameterChange");return(0,i.uX)(),(0,i.CE)("div",r,[c.isLoading?((0,i.uX)(),(0,i.CE)("div",n,a[0]||(a[0]=[(0,i.Lk)("div",{class:"spinner"},null,-1),(0,i.Lk)("p",null,"Загрузка данных...",-1)]))):c.errorMessage?((0,i.uX)(),(0,i.CE)("div",s,[(0,i.Lk)("p",null,(0,o.v_)(c.errorMessage),1)])):c.dataPoints.length>0?((0,i.uX)(),(0,i.CE)("div",l,[(0,i.bF)(h,{dataPoints:c.dataPoints,paramX:e.paramX,paramY:e.paramY},null,8,["dataPoints","paramX","paramY"])])):(0,i.Q3)("",!0)])}const c={ref:"plot",class:"plotly-graph"};function u(t,a,e,o,r,n){return(0,i.uX)(),(0,i.CE)("div",c,null,512)}var h=e(708),m=e.n(h),p={props:{dataPoints:{type:Array,required:!0},paramX:{type:String,required:!0},paramY:{type:String,required:!0}},watch:{dataPoints:{handler(){this.renderPlot()},deep:!0},paramX:"renderPlot",paramY:"renderPlot"},mounted(){this.renderPlot()},methods:{renderPlot(){if(!this.$refs.plot)return void console.error("Ref 'plot' is not available.");const t={"Период":"t","Амплитуда по X":"ax","Амплитуда по Y":"ay","Амплитуда по Z":"az","Расстояние до Земли":"dist_primary","Расстояние до Луны":"dist_secondary","Константа Якоби":"cj","Максимальный множитель Флоке":"max_floke"},a=t[this.paramX],e=t[this.paramY];if(!a||!e)return void console.error("Invalid parameter selected");const i=this.dataPoints.map((t=>t[a])),o=this.dataPoints.map((t=>t[e])),r=this.dataPoints.map((t=>{let a="";for(const[e,i]of Object.entries(t))a+=`${e}: ${i}<br>`;return a})),n=[{x:i,y:o,mode:"markers",type:"scatter",marker:{size:6},text:r,hoverinfo:"text"}],s={xaxis:{title:this.paramX},yaxis:{title:this.paramY},showlegend:!1,width:700,height:500,hovermode:"closest"},l={displayModeBar:!1,responsive:!0};m().react(this.$refs.plot,n,s,l)}}},b=e(262);const v=(0,b.A)(p,[["render",u],["__scopeId","data-v-34e8c4a6"]]);var f=v,y={components:{GraphForParameterChange:f},props:{family:{type:String,required:!1},paramX:{type:String,required:!1},paramY:{type:String,required:!1}},data(){return{isLoading:!1,errorMessage:"",dataPoints:[]}},computed:{fetchParams(){return{family:this.family,paramX:this.paramX,paramY:this.paramY}}},watch:{fetchParams:{handler(){this.fetchParams.family&&this.fetchParams.paramX&&this.fetchParams.paramY&&this.fetchData()},deep:!0}},mounted(){this.family&&this.paramX&&this.paramY&&this.fetchData()},methods:{async fetchData(){if(this.family&&this.paramX&&this.paramY){this.isLoading=!0,this.errorMessage="",this.dataPoints=[];try{const t=await fetch(`https://orbital-catalog.auditory.ru/api/v1/orbits/family/${encodeURIComponent(this.family)}`);if(!t.ok)throw new Error("Ошибка при загрузке данных");const a=await t.json();this.dataPoints=a||[]}catch(t){console.error("Error fetching data:",t),this.errorMessage=t.message}finally{this.isLoading=!1}}else this.errorMessage="Пожалуйста, выберите семейство и параметры для осей X и Y"}}};const g=(0,b.A)(y,[["render",d],["__scopeId","data-v-6d6108c5"]]);var L=g},698:function(t,a,e){t.exports=e.p+"img/arrow-down.a0f24d19.svg"},935:function(t,a,e){t.exports=e.p+"img/logo.b9ced963.svg"},739:function(t,a,e){t.exports=e.p+"img/icon.06d36db7.png"}}]);
//# sourceMappingURL=app-189e7968.7f05e77f.js.map